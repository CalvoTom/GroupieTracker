<html>
	<head>
		<title>Petit Bac | Lackluster Melodie</title>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="./static/gameStyle.css">
	</head>
	<body>
		<h1 class="theme" style="display: block;"> Artist </h1>
		<h1 class="theme" style="display: none;"> Album </h1>
		<h1 class="theme" style="display: none;"> Groupe de music </h1>
		<h1 class="theme" style="display: none;"> Instrument de music </h1>
		<h1 class="theme" style="display: none;"> Featuring </h1>

		<h1  class="theme">{{template "reponse-container" .}}</h1>

		<button style="display: block;" class="button-next" name="featuring" value="Next" onclick="nextQuestion(0)">Next</button>
		<button style="display: none;" class="button-next" name="featuring" value="Next" onclick="nextQuestion(1)">Next</button>
		<button style="display: none;" class="button-next" name="featuring" value="Next" onclick="nextQuestion(2)">Next</button>
		<button style="display: none;" class="button-next" name="featuring" value="Next" onclick="nextQuestion(3)">Next</button>
		<button style="display: none;" class="button-next" type="submit" form="scattegories-verification" value="Submit">Submit</button>
		<script>
			let ws = new WebSocket("ws://" + window.location.hostname + ":8080/ws")

			ws.onopen = function(){
				console.log("Websocket open")
			}

			ws.onmessage = function(event){
				if (event.data == "refresh"){
					location.reload()
				}
			}

            function nextQuestion(currentIndex) {
				var container = document.querySelectorAll('.container');
				var button = document.querySelectorAll('.button-next');
				var theme = document.querySelectorAll('.theme');

                if (currentIndex + 1 <= 4) {
					button[currentIndex].style.display = 'none';
                    button[currentIndex + 1].style.display = 'block';
					theme[currentIndex].style.display = 'none';
                    theme[currentIndex + 1].style.display = 'block';

					displayQuestion(container.length, currentIndex, container)
                }
			}

			function displayQuestion(lenContainer, currentIndex, container){
				switch (lenContainer){
					case 5 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';
						break;
					case 10 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';

						container[currentIndex + 5].style.display = 'none';
                    	container[currentIndex + 6].style.display = 'block';
						break;
					case 15 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';

						container[currentIndex + 5].style.display = 'none';
                    	container[currentIndex + 6].style.display = 'block';

						container[currentIndex + 10].style.display = 'none';
                    	container[currentIndex + 11].style.display = 'block';
						break;
					case 20 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';

						container[currentIndex + 5].style.display = 'none';
                    	container[currentIndex + 6].style.display = 'block';

						container[currentIndex + 10].style.display = 'none';
                    	container[currentIndex + 11].style.display = 'block';

						container[currentIndex + 15].style.display = 'none';
                    	container[currentIndex + 16].style.display = 'block';
						break;
					case 25 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';

						container[currentIndex + 5].style.display = 'none';
                    	container[currentIndex + 6].style.display = 'block';

						container[currentIndex + 10].style.display = 'none';
                    	container[currentIndex + 11].style.display = 'block';

						container[currentIndex + 15].style.display = 'none';
                    	container[currentIndex + 16].style.display = 'block';

						container[currentIndex + 20].style.display = 'none';
                    	container[currentIndex + 21].style.display = 'block';
						break;
					case 30 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';

						container[currentIndex + 5].style.display = 'none';
                    	container[currentIndex + 6].style.display = 'block';

						container[currentIndex + 10].style.display = 'none';
                    	container[currentIndex + 11].style.display = 'block';

						container[currentIndex + 15].style.display = 'none';
                    	container[currentIndex + 16].style.display = 'block';

						container[currentIndex + 20].style.display = 'none';
                    	container[currentIndex + 21].style.display = 'block';

						container[currentIndex + 25].style.display = 'none';
                    	container[currentIndex + 26].style.display = 'block';
						break;
				}
			}
		</script>
	</body>
</html>
