<html>
	<head>
		<title>Lack Luster Melodie</title>
		<style>
			body {
				font-family: Arial, sans-serif;
			}
			.question {
				margin-bottom: 20px;
			}
			.button {
				background-color: #4CAF50;
				color: #fff;
				padding: 10px 20px;
				border: none;
				border-radius: 5px;
				cursor: pointer;
			}
			.button:hover {
				background-color: #3e8e41;
			}
            .button-false {
				background-color: #af4c4c;
				color: #fff;
				padding: 10px 20px;
				border: none;
				border-radius: 5px;
				cursor: pointer;
			}
			.button-false:hover {
				background-color: #8e3e3e;
			}
		</style>
	</head>
	<body>
		<h1>{{.Username}}</h1>
			<div class="question" id="question-0">
				<p>Artist: {{.Artist}}</p>
				<button class="button" name="artist" value="true" onclick="nextQuestion(0)">Vrai</button>
				<button class="button-false" name="artist" value="false" onclick="nextQuestion(0)">Faux</button>
			</div>
			<div class="question" id="question-1" style="display: none;">
				<p>Album: {{.Album}}</p>
				<button class="button" name="album" value="true" onclick="nextQuestion(1)">Vrai</button>
				<button class="button-false" name="album" value="false" onclick="nextQuestion(1)">Faux</button>
			</div>
			<div class="question" id="question-2" style="display: none;">
				<p>Groupe de musique: {{.GroupeDeMusic}}</p>
				<button class="button" name="groupe" value="true" onclick="nextQuestion(2)">Vrai</button>
				<button class="button-false" name="groupe" value="false" onclick="nextQuestion(2)">Faux</button>
			</div>
			<div class="question" id="question-3" style="display: none;">
				<p>Instrument de musique: {{.InstrumentDeMusic}}</p>
				<button class="button" name="instrument" value="true" onclick="nextQuestion(3)">Vrai</button>
				<button class="button-false" name="instrument" value="false" onclick="nextQuestion(3)">Faux</button>
			</div>
			<div class="question" id="question-4" style="display: none;">
				<p>Featuring: {{.Featuring}}</p>
				<button class="button" name="featuring" value="true" onclick="nextQuestion(4)">Vrai</button>
				<button class="button-false" name="featuring" value="false" onclick="nextQuestion(4)">Faux</button>
			</div>
		<script>
			let ws = new WebSocket("ws://" + window.location.hostname + ":8080/ws")

			ws.onopen = function(){
				console.log("Websocket open")
			}

			ws.onmessage = function(event){
				console.log(event)
			}

            function nextQuestion(currentIndex) {
				var container = document.querySelectorAll('.container');
				var button = document.querySelectorAll('.button-next');
				var theme = document.querySelectorAll('.theme');

                if (currentIndex + 1 <= 4) {
					button[currentIndex].style.display = 'none';
                    button[currentIndex + 1].style.display = 'block';
					theme[currentIndex].style.display = 'none';
                    theme[currentIndex + 1].style.display = 'block';

					displayQuestion(container.length, currentIndex, container)
                }
			}

			function displayQuestion(lenContainer, currentIndex, container){
				switch (lenContainer){
					case 5 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';
						break;
					case 10 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';

						container[currentIndex + 5].style.display = 'none';
                    	container[currentIndex + 6].style.display = 'block';
						break;
					case 15 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';

						container[currentIndex + 5].style.display = 'none';
                    	container[currentIndex + 6].style.display = 'block';

						container[currentIndex + 10].style.display = 'none';
                    	container[currentIndex + 11].style.display = 'block';
						break;
					case 20 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';

						container[currentIndex + 5].style.display = 'none';
                    	container[currentIndex + 6].style.display = 'block';

						container[currentIndex + 10].style.display = 'none';
                    	container[currentIndex + 11].style.display = 'block';

						container[currentIndex + 15].style.display = 'none';
                    	container[currentIndex + 16].style.display = 'block';
						break;
					case 25 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';

						container[currentIndex + 5].style.display = 'none';
                    	container[currentIndex + 6].style.display = 'block';

						container[currentIndex + 10].style.display = 'none';
                    	container[currentIndex + 11].style.display = 'block';

						container[currentIndex + 15].style.display = 'none';
                    	container[currentIndex + 16].style.display = 'block';

						container[currentIndex + 20].style.display = 'none';
                    	container[currentIndex + 21].style.display = 'block';
						break;
					case 30 :
						container[currentIndex].style.display = 'none';
                    	container[currentIndex + 1].style.display = 'block';

						container[currentIndex + 5].style.display = 'none';
                    	container[currentIndex + 6].style.display = 'block';

						container[currentIndex + 10].style.display = 'none';
                    	container[currentIndex + 11].style.display = 'block';

						container[currentIndex + 15].style.display = 'none';
                    	container[currentIndex + 16].style.display = 'block';

						container[currentIndex + 20].style.display = 'none';
                    	container[currentIndex + 21].style.display = 'block';

						container[currentIndex + 25].style.display = 'none';
                    	container[currentIndex + 26].style.display = 'block';
						break;
				}
			}
		</script>
	</body>
</html>